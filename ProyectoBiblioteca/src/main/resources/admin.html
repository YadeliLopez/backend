<!DOCTYPE html>
<html lang="pt-es">

<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="author" content="Equipo 4">
   <title>Administracion</title>
   <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

   <!-- Bootstrap CSS -->
   <link rel="stylesheet" href="css/bootstrap.min.css">
   <link rel="stylesheet" href="css/admin.css">
   <link rel="stylesheet" href="font-awesome/css/fontawesome.min.css">
   <link rel="stylesheet" href="font-awesome/css/solid.min.css">
   <link rel="stylesheet" href="font-awesome/css/regular.min.css">
   <link rel="stylesheet" href="font-awesome/css/svg-with-js.min.css">
   <link rel="stylesheet" href="font-awesome/css/v4-shims.min.css">




</head>

<body>

   <!-- Navegacion -->
   <nav class="navbar navbar-fixed-top navbar-inverse">
      <div class="container">
         <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#barra-navegacion">
               <span class="sr-only"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
            </button>
            <a href="#" class="navbar-brand">
               <span class="img-logo">Biblioteca Virtual</span>
            </a>
         </div>
         <div class="collapse navbar-collapse" id="barra-navegacion">
            <ul class="nav navbar-nav navbar-right">
               <li><a href="index.html">
                     Salir
                     <i class="glyphicon glyphicon-log-in"></i>
                  </a></li>
            </ul>
         </div>
      </div>
   </nav>

   <!-- Tab Navegacion -->
   <section class="nav2">
      <div class="container-fluid">
         <ul class=" nav-custom nav-pills nav-justified">
            <li><a href="#consultar" role="tab" data-toggle="tab"><i class="fas fa-list-ul"></i>Consultar Usuarios</a>
            </li>
            <li><a href="#nuevousuario" role="tab" data-toggle="tab"><i class="far fa-address-card"></i>Nuevo Usuario</a></li>
            <li><a href="#libros" role="tab" data-toggle="tab"><i class="fas fa-book-open"></i>Libros</a></li>
         </ul>
      </div>
   </section>

   <!-- Contenido de las tablas-->
   <div class="tab-content">

      <!-- Consulta de Usuarios -->
      <div class="tab-pane fade" role="tabpanel" id="consultar">
         <section class="consultar">
            <div class="container-fluid">
               <div class="panel panel-default">
                  <div class="panel-heading">
                     <h4>Usuarios</h4>
                  </div>
                  <div class="panel-body">
                     <br>
                     <div class="table-responsive"><table class="table table-striped table-condensed ">
                           <thead>
                              <tr>
                                <<th>Numero</th>
                                <<th>Nombre</th>
                                 <th>Matricula</th>
                                 <th>Tipo de Usuario</th>
                                 <th>Libro prestado</th>
                              </tr>
                           </thead>
                           <tbody id="tablaUsuarios">
                              <tr>
                                    <td>0</td>
                                    <td>Claudia López</td>
                                    <td>S56235425</td>
                                    <td>Estudiante</td>
                                    <td>Geografia 1</td>
                                    <td><span class="label label-success"></span></td>
                                 </td>
                              </tr>

                           </tbody>
                        </table>
                     </div>
                  </div>
                  <div class="panel-footer">

                  </div>

               </div>
         </section>
      </div>

      <!--Registro de nuevo Usuario-->
      <div class="tab-pane fade" role="tabpanel" id="nuevousuario">
         <section class="registro">
            <div class="container">

               <div class="panel panel-default">
                  <form action="">
                     <legend class="text-center">Registro de Usuarios</legend>
                     <div class="row">

                        <div class="form-group col-md-6">
                           <label>Usuario</label>
                           <input class="form-control" type="text" name="Usuario" id="nombreAD" placeholder="Nombre">
                        </div>   

                        <div class="form-group col-md-6">
                           <label>Tipo de Usuario</label>
                           <select name="" id="tipousuarioAD" class="form-control">
                              <option value="">Seleccione</option>
                              <option value="1">Estudiante</option>
                              <option value="2">Administrador</option>
                           </select>
                        </div>

                        <div class="form-group col-md-6">
                           <label for="matricula">Matricula</label>
                           <input class="form-control" type="text" name="Matricula" id="matriculaAD"
                              placeholder="Matricula">
                        </div>

                                 
                        <div class="form-group col-md-2">
                           <label for="password">Password</label>
                           <input class="form-control" type="text" maxlength="8" id="passwordAD" placeholder="Password">
                        </div>

                        
                     <button type="submit" id="btnRegistroAD" class="btn btn-primary btn-block" src="">Registrar</button>

                  </form>
               </div>
            </div>
         </section>
      </div>

      <!--Libros-->
      <div class="tab-pane" role="tablist" id="libros">
         <section class="libros">
            <div class="container">
               <div class="row">
                  <div class="col-md-6">
                     <form action="">
                        <legend class="text-center">Registrar Libros</legend>

                       <!-- <div class="form-group">
                           <label for="">Portada del libro</label>
                           <input type="file" id="img" class="form-control">
                        </div>-->

                        <div class="form-group">
                           <label for="titulo">ISBN</label>
                           <input type="text" id="isbn" class="form-control" placeholder="ISBN">
                        </div>

                        <div class="form-group">
                           <label for="titulo">Título</label>
                           <input type="text" id="titulo" class="form-control" placeholder="Título del libro">
                        </div>
                        

                        <div class="form-group">
                           <label for="autor">Autor</label>
                           <input type="text" id="autor" class="form-control" placeholder="Nombre del autor">
                        </div>

                        <!--<div class="form-group">
                           <label for="">Archivo PDF</label>
                           <input type="file" id="img" class="form-control">
                        </div>-->

                        <button type="submit" id="registroLibro" class="btn btn-success">Enviar</button>

                     </form>
                  </div>
               </div>

            </div>
         </section>
      </div>



   </div>
   <!--tab-content-->



   <!--REGISTRO DE USUARIO NUEVO-->
   <script>
      var btnRegistroAD = document.getElementById("btnRegistroAD")
      btnRegistroAD.addEventListener("click", function(){
        let nombreAD = document.getElementById("nombreAD").value
        let matriculaAD = document.getElementById("matriculaAD").value
        let passwordAD = document.getElementById("passwordAD").value
        let tipoAD = document.getElementById("tipoAD").value
        console.log(nombreAD + " " + matriculaAD + " " + passwordAD + " " + tipoAD)
        axios.post("http://localhost:80/usuarios", {
          nombre: nombreAD,
          matricula: matriculaAD,
          password: passwordAD,
          tipo: tipoAD
        })
        .then(function(response){
          console.log(response);
        })
        .catch(function(error){
          console.log(error);
        });
      })
    </script>


<!--CONSULTA DE USUARIOS-->
   <script>
var querystring = window.location.search;
var parametros = new URLSearchParams(querystring);

idUsuarios= parametros.get("Usuario");
nombre = parametros.get("nombre");

axios.get("http://localhost:80/usuarios")
    .then(function (res) {
        let json = res.data;
        let tablaUsuario = document.getElementById("tablaUsuarios");
        var num =1;
        let titulo = document.getElementById("titulo");
        titulo.innerHTML=nombre;
        for (var clave in json) {
            if (json.hasOwnProperty(clave)) {
                let fila = document.createElement("tr");
                var col1 = document.createElement("th");
                col1.innerHTML = num;
                var col2 = document.createElement("td");
                col2.innerHTML = json[clave].nombre;
                var col3 = document.createElement("td");
                col3.innerHTML = json[clave].matricula;
                var col4 = document.createElement("td");
                col4.innerHTML = json[clave].tipo;
                var col5 = document.createElement("td");
                col5.innerHTML = json[clave].libroPrestado;

                tablaUsuario.appendChild(fila);
                fila.appendChild(col1);
                fila.appendChild(col2);
                fila.appendChild(col3);
                fila.appendChild(col4);
                num = num +1;
            }
        }
    })
    .catch()
   </script>

<!--REGISTRO DE LIBRO NUEVO-->
   <script>
   var bNuevoLibro= document.getElementById("registroLibro");
       bNuevoLibro.addEventListener("click", function () {
       let isbn_ = document.getElementById("isbn").value
       let titulo_ = document.getElementById("titulo").value
       let autor_ = document.getElementById("autor").value
       console.log(isbn_ + " " + titulo_ + " "+autor_ )
       axios.post("http://localhost:80/libros", {
           isbn: isbn_,
           titulo:titulo_,
           autor: autor_,
       })
           .then(function (response) {
               console.log(response);
           })
           .catch(function (error) {
               console.log(error);
           });
   })
   </script>






   <!-- jQuery -->
   <script src="js/jquery-1.11.0.min.js"></script>
   <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
   <!-- Bootstrap JavaScript -->
   <script src="js/bootstrap.min.js"></script>



</body>

</html>